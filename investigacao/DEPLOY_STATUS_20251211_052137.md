# Status de Deploy - 11/12/2025

## ‚úÖ Backend Deployed

**Vers√£o atual:** `825dab2d-bc3b-4e1b-83dc-057935c8ef3c`
**URL:** https://api.investigaree.com.br
**Status:** ‚úÖ ATIVO

### Commits inclu√≠dos no backend:

1. **0fb02b0** - fix: Corrigir nome da tabela para user_investigacoes nos endpoints admin
   - Arquivo: `src/routes/admin.routes.ts`
   - Mudan√ßa: Substituir todas refer√™ncias de 'investigacoes' para 'user_investigacoes'
   - Impacto: Corrige erro 500 nos endpoints /api/admin/investigacoes

2. **b87b394** - fix: Remover modo DEV e for√ßar uso de API de produ√ß√£o
   - Arquivo: `src/routes/investigacoes.routes.ts`
   - Mudan√ßa: Corrigir ordem de rotas (/stats antes de /:id)
   - Impacto: Corrige erro 404 no endpoint /stats

### Endpoints admin dispon√≠veis:
- `GET /api/admin/investigacoes` - Lista todas investiga√ß√µes
- `GET /api/admin/investigacoes/stats` - Estat√≠sticas globais
- `GET /api/admin/dashboard` - Dashboard global
- `GET /api/admin/users` - Lista todos usu√°rios
- `GET /api/admin/tenants` - Lista todos tenants
- `GET /api/admin/alerts` - Lista alertas do sistema
- `GET /api/admin/audit-logs` - Logs de auditoria

## ‚úÖ Frontend Built

**Status:** ‚úÖ BUILD CONCLU√çDO
**Modo:** Production
**Next.js:** 15.1.9

### Commits inclu√≠dos no frontend:

1. **ac254e1** - feat: Adicionar vis√£o global admin e modo kanban padr√£o
   - Arquivos:
     - `src/app/dashboard/page.tsx` - Dashboard com vis√£o admin
     - `src/app/dashboard/investigacoes/page.tsx` - Modo kanban padr√£o + admin
     - `src/app/dashboard/analitico/page.tsx` - Relat√≥rios admin
     - `src/lib/admin-api.ts` - Fun√ß√µes para endpoints admin
   - Impacto: Admin v√™ TODAS as investiga√ß√µes de TODOS os usu√°rios

2. **d054358** - fix: Se√ß√£o COMURG no sidebar deve vir fechada por padr√£o
   - Arquivo: `src/app/dashboard/layout.tsx`
   - Mudan√ßa: `useState(false)` para comurgSectionOpen
   - Impacto: Menu mais limpo por padr√£o

3. **750e4f8** - fix: Corrigir endpoints de investiga√ß√µes de ingl√™s para portugu√™s
   - Arquivo: `src/hooks/useInvestigations.ts`
   - Mudan√ßa: `/api/investigations` ‚Üí `/api/investigacoes` (8 ocorr√™ncias)
   - Impacto: Corrige erro 404 ao buscar investiga√ß√µes

4. **b87b394** - fix: Remover modo DEV e for√ßar uso de API de produ√ß√£o
   - Arquivos:
     - `src/components/dashboard/AddInvestigacaoModal.tsx` - Remove l√≥gica DEV
     - `src/lib/api.ts` - For√ßa uso de API de produ√ß√£o
     - `src/lib/localStorage.ts` - DELETADO (obsoleto)
   - Impacto: Sistema sempre usa API real

## üìä Funcionalidades Admin Ativas

Para usu√°rios admin (dkbotdani@gmail.com, ibsenmaciel@gmail.com, contato@investigaree.com.br):

### ‚úÖ /dashboard
- Exibe TODAS as investiga√ß√µes de TODOS os usu√°rios
- Badge "Vis√£o Global (Admin)"
- Estat√≠sticas globais do sistema

### ‚úÖ /dashboard/investigacoes
- Lista TODAS as investiga√ß√µes do sistema
- Modo visualiza√ß√£o: **KANBAN** (padr√£o)
- Mostra email do usu√°rio propriet√°rio

### ‚úÖ /dashboard/analitico
- Exibe TODOS os relat√≥rios de TODOS os usu√°rios
- Badge "Vis√£o Global (Admin)"
- Filtros e busca funcionando

## üîç Verifica√ß√µes Recomendadas

1. **Testar login como admin** (dkbotdani@gmail.com)
2. **Verificar badge "Vis√£o Global (Admin)"** aparece
3. **Confirmar que v√™ dados de TODOS os usu√°rios**
4. **Verificar modo kanban** est√° ativo por padr√£o em /investigacoes
5. **Testar cria√ß√£o de investiga√ß√£o** (deve salvar na API real)
6. **Verificar se√ß√£o COMURG** est√° fechada por padr√£o

## üìù Notas Importantes

- ‚úÖ Backend usa tabela `user_investigacoes` (corrigido)
- ‚úÖ Todos os endpoints em portugu√™s `/api/investigacoes`
- ‚úÖ Modo DEV completamente removido
- ‚úÖ Sistema SEMPRE usa API de produ√ß√£o (mesmo em dev)
- ‚úÖ Menu COMURG inicia fechado
- ‚úÖ Investiga√ß√µes iniciam em modo kanban

## üöÄ Pr√≥ximos Passos

1. Testar todas as funcionalidades admin
2. Verificar se h√° algum erro no console
3. Confirmar que dados s√£o persistidos corretamente
4. Reportar qualquer problema encontrado
